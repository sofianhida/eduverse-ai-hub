// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://kdpdyjmwtgkjhupcowlm.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtkcGR5am13dGdramh1cGNvd2xtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2MjQ0MzgsImV4cCI6MjA1ODIwMDQzOH0.ILabT0YBQmW6yztTNXn9_4Ojm5lkjPWVhgsH9lvjlMg";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true
  }
});

// Helper function to get features for admin/teacher module
export const getAdminFeatures = async () => {
  try {
    // For now, return mock data since the table might not exist yet
    return [
      {
        id: '1',
        title: 'Manajemen Siswa',
        description: 'Kelola data siswa dengan mudah dan efisien',
        icon_name: 'Users',
        display_order: 1
      },
      {
        id: '2',
        title: 'Analisis Prestasi',
        description: 'Dapatkan wawasan tentang kinerja akademik siswa',
        icon_name: 'BarChart4',
        display_order: 2
      },
      {
        id: '3',
        title: 'Jadwal Terpadu',
        description: 'Kelola jadwal kelas dan kegiatan sekolah',
        icon_name: 'Calendar',
        display_order: 3
      },
      {
        id: '4',
        title: 'Laporan Otomatis',
        description: 'Buat laporan akademik dan administrasi secara otomatis',
        icon_name: 'FileText',
        display_order: 4
      }
    ];
  } catch (error) {
    console.error('Error fetching admin features:', error);
    return [];
  }
};

// Helper function to get features for student module
export const getStudentFeatures = async () => {
  try {
    // For now, return mock data since the table might not exist yet
    return [
      {
        id: '1',
        title: 'Tutor AI Personal',
        description: 'Belajar dengan bantuan AI yang menyesuaikan dengan gaya belajar Anda',
        icon_name: 'GraduationCap',
        display_order: 1
      },
      {
        id: '2',
        title: 'Latihan Soal Cerdas',
        description: 'Latihan soal yang menyesuaikan dengan tingkat kemampuan Anda',
        icon_name: 'BrainCircuit',
        display_order: 2
      },
      {
        id: '3',
        title: 'Rangkuman Materi',
        description: 'Rangkuman otomatis dari materi pelajaran yang membantu pemahaman',
        icon_name: 'BookOpenCheck',
        display_order: 3
      },
      {
        id: '4',
        title: 'Konsultasi Virtual',
        description: 'Tanyakan pertanyaan dan dapatkan jawaban secara real-time',
        icon_name: 'MessageSquare',
        display_order: 4
      }
    ];
  } catch (error) {
    console.error('Error fetching student features:', error);
    return [];
  }
};

// Function to check Supabase connection status
export const checkSupabaseConnection = async () => {
  try {
    // Using a more type-safe approach that won't cause TypeScript errors
    const { error } = await supabase.auth.getSession();
    return { connected: !error, error: error ? error.message : null };
  } catch (err) {
    console.error('Supabase connection check failed:', err);
    return { connected: false, error: err instanceof Error ? err.message : 'Unknown error' };
  }
};

// Helper function to get subject features 
export const getSubjectFeatures = async () => {
  // Simulating API call
  await new Promise(resolve => setTimeout(resolve, 800));
  
  return [
    {
      id: 1,
      title: "Matematika",
      symbol: "π",
      color: "blue",
      description: "Belajar konsep **matematika** secara interaktif dengan pendekatan berbasis masalah kontekstual dan visualisasi dinamis"
    },
    {
      id: 2,
      title: "Ilmu Pengetahuan Alam",
      symbol: "⚗️",
      color: "green",
      description: "Eksplorasi **fenomena alam** melalui eksperimen virtual dan simulasi interaktif yang meningkatkan pemahaman konsep sains"
    },
    {
      id: 3,
      title: "Bahasa Indonesia",
      symbol: "A",
      color: "red",
      description: "Kembangkan kemampuan **berbahasa Indonesia** melalui berbagai aktivitas membaca, menulis, mendengarkan, dan berbicara"
    },
    {
      id: 4,
      title: "Bahasa Inggris",
      symbol: "E",
      color: "purple",
      description: "Tingkatkan kemampuan **bahasa Inggris** dengan metode komunikatif dan praktik percakapan dengan AI native speaker"
    }
  ];
};

// Mock data for subjects by education level
export const getSubjectsByLevel = async (level: string) => {
  // Simulating API call
  await new Promise(resolve => setTimeout(resolve, 1000));
  
  if (level === 'sd') {
    return [
      {
        id: 1,
        name: "**Pendidikan Agama dan Budi Pekerti**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Mata pelajaran yang mengajarkan nilai-nilai keagamaan dan moral sesuai dengan agama masing-masing siswa",
        isRequired: true
      },
      {
        id: 2,
        name: "**Pendidikan Pancasila**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pengenalan dan pemahaman tentang ideologi negara, Pancasila, serta nilai-nilai kebangsaan",
        isRequired: true
      },
      {
        id: 3,
        name: "**Bahasa Indonesia**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pengembangan kemampuan berbahasa Indonesia, baik lisan maupun tulisan",
        isRequired: true
      },
      {
        id: 4,
        name: "**Matematika**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pembelajaran konsep matematika dasar dan pengembangan kemampuan berpikir logis",
        isRequired: true
      },
      {
        id: 5,
        name: "**Ilmu Pengetahuan Alam dan Sosial (IPAS)**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Integrasi pembelajaran ilmu pengetahuan alam dan sosial sebagai dasar memahami lingkungan",
        isRequired: true
      },
      {
        id: 6,
        name: "**Pendidikan Jasmani, Olahraga, dan Kesehatan (PJOK)**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pengembangan kesehatan jasmani, keterampilan motorik, dan nilai-nilai sportivitas",
        isRequired: true
      },
      {
        id: 7,
        name: "**Seni dan Budaya**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pembelajaran berbagai bentuk seni dan apresiasi terhadap kebudayaan Indonesia",
        isRequired: false
      },
      {
        id: 8,
        name: "**Bahasa Inggris**",
        level: "sd",
        phase: "Fase B, C",
        description: "Pengenalan bahasa Inggris sebagai bahasa internasional (opsional berdasarkan kesiapan sekolah)",
        isRequired: false
      },
      {
        id: 9,
        name: "**Muatan Lokal**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Pembelajaran tentang budaya dan kearifan lokal sesuai daerah masing-masing",
        isRequired: false
      },
      {
        id: 10,
        name: "**Proyek Penguatan Profil Pelajar Pancasila (P5)**",
        level: "sd",
        phase: "Fase A, B, C",
        description: "Proyek lintas mata pelajaran untuk mengembangkan karakter dan kompetensi siswa sesuai Profil Pelajar Pancasila",
        isRequired: true
      }
    ];
  } else if (level === 'smp') {
    return [
      {
        id: 11,
        name: "**Pendidikan Agama dan Budi Pekerti**",
        level: "smp",
        phase: "Fase D",
        description: "Pendalaman nilai-nilai keagamaan dan moral sesuai dengan agama masing-masing siswa",
        isRequired: true
      },
      {
        id: 12,
        name: "**Pendidikan Pancasila**",
        level: "smp",
        phase: "Fase D",
        description: "Penguatan pemahaman dan praktik nilai-nilai Pancasila dalam kehidupan sehari-hari",
        isRequired: true
      },
      {
        id: 13,
        name: "**Bahasa Indonesia**",
        level: "smp",
        phase: "Fase D",
        description: "Pengembangan kemampuan berbahasa Indonesia untuk komunikasi efektif dan apresiasi sastra",
        isRequired: true
      },
      {
        id: 14,
        name: "**Matematika**",
        level: "smp",
        phase: "Fase D",
        description: "Pendalaman konsep matematika dan pengembangan kemampuan pemecahan masalah",
        isRequired: true
      },
      {
        id: 15,
        name: "**Ilmu Pengetahuan Alam (IPA)**",
        level: "smp",
        phase: "Fase D",
        description: "Pembelajaran tentang konsep fisika, kimia, dan biologi secara terpisah namun terintegrasi",
        isRequired: true
      },
      {
        id: 16,
        name: "**Ilmu Pengetahuan Sosial (IPS)**",
        level: "smp",
        phase: "Fase D",
        description: "Pembelajaran tentang masyarakat, sejarah, geografi, dan ekonomi secara terpadu",
        isRequired: true
      },
      {
        id: 17,
        name: "**Pendidikan Jasmani, Olahraga, dan Kesehatan (PJOK)**",
        level: "smp",
        phase: "Fase D",
        description: "Pengembangan kesehatan jasmani, keterampilan olahraga, dan pola hidup sehat",
        isRequired: true
      },
      {
        id: 18,
        name: "**Seni Budaya**",
        level: "smp",
        phase: "Fase D",
        description: "Pembelajaran dan apresiasi seni musik, rupa, tari, atau teater berdasarkan minat siswa",
        isRequired: false
      },
      {
        id: 19,
        name: "**Prakarya**",
        level: "smp",
        phase: "Fase D",
        description: "Pengembangan keterampilan membuat produk kerajinan, rekayasa, budidaya, atau pengolahan",
        isRequired: false
      },
      {
        id: 20,
        name: "**Informatika**",
        level: "smp",
        phase: "Fase D",
        description: "Pembelajaran tentang teknologi informasi, computational thinking, dan dasar pemrograman",
        isRequired: false
      },
      {
        id: 21,
        name: "**Bahasa Inggris**",
        level: "smp",
        phase: "Fase D",
        description: "Pengembangan kemampuan bahasa Inggris untuk komunikasi dasar dan pemahaman teks",
        isRequired: true
      },
      {
        id: 22,
        name: "**Muatan Lokal**",
        level: "smp",
        phase: "Fase D",
        description: "Pembelajaran tentang budaya dan kearifan lokal sesuai daerah masing-masing",
        isRequired: false
      },
      {
        id: 23,
        name: "**Proyek Penguatan Profil Pelajar Pancasila (P5)**",
        level: "smp",
        phase: "Fase D",
        description: "Proyek lintas mata pelajaran untuk mengembangkan karakter dan kompetensi siswa sesuai Profil Pelajar Pancasila",
        isRequired: true
      }
    ];
  } else if (level === 'sma') {
    return [
      // Mata Pelajaran Wajib
      {
        id: 24,
        name: "**Pendidikan Agama dan Budi Pekerti**",
        level: "sma",
        phase: "Fase E, F",
        description: "Pendalaman nilai-nilai keagamaan, moral, dan etika sesuai dengan agama masing-masing siswa",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 25,
        name: "**Pendidikan Pancasila**",
        level: "sma",
        phase: "Fase E, F",
        description: "Penguatan pemahaman dan implementasi Pancasila sebagai ideologi dan pandangan hidup bangsa",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 26,
        name: "**Bahasa Indonesia**",
        level: "sma",
        phase: "Fase E, F",
        description: "Penguatan kompetensi berbahasa Indonesia dan apresiasi sastra Indonesia",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 27,
        name: "**Sejarah**",
        level: "sma",
        phase: "Fase E, F",
        description: "Pembelajaran tentang sejarah Indonesia dan dunia untuk membangun kesadaran berbangsa",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 28,
        name: "**Pendidikan Jasmani, Olahraga, dan Kesehatan (PJOK)**",
        level: "sma",
        phase: "Fase E, F",
        description: "Pengembangan kesehatan jasmani, keterampilan olahraga, dan gaya hidup sehat",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 29,
        name: "**Bahasa Inggris**",
        level: "sma",
        phase: "Fase E, F",
        description: "Pengembangan kemampuan bahasa Inggris untuk komunikasi global dan akademik",
        isRequired: true,
        category: "Wajib"
      },
      {
        id: 30,
        name: "**Proyek Penguatan Profil Pelajar Pancasila (P5)**",
        level: "sma",
        phase: "Fase E, F",
        description: "Proyek lintas mata pelajaran untuk mengembangkan karakter dan kompetensi sesuai Profil Pelajar Pancasila",
        isRequired: true,
        category: "Wajib"
      },
      
      // Mata Pelajaran Pilihan MIPA
      {
        id: 31,
        name: "**Matematika Peminatan**",
        level: "sma",
        phase: "Fase F",
        description: "Pendalaman konsep matematika dan pengembangan keterampilan analitis tingkat lanjut",
        isRequired: false,
        category: "MIPA"
      },
      {
        id: 32,
        name: "**Fisika**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang konsep fisika dan aplikasinya dalam memahami fenomena alam",
        isRequired: false,
        category: "MIPA"
      },
      {
        id: 33,
        name: "**Kimia**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang struktur, sifat, dan reaksi zat serta aplikasinya",
        isRequired: false,
        category: "MIPA"
      },
      {
        id: 34,
        name: "**Biologi**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang makhluk hidup, lingkungan, dan interaksinya",
        isRequired: false,
        category: "MIPA"
      },
      {
        id: 35,
        name: "**Informatika**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang teknologi informasi, pemrograman, dan computational thinking tingkat lanjut",
        isRequired: false,
        category: "MIPA"
      },
      
      // Mata Pelajaran Pilihan IPS
      {
        id: 36,
        name: "**Ekonomi**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang konsep ekonomi, sistem ekonomi, dan perilaku ekonomi dalam masyarakat",
        isRequired: false,
        category: "IPS"
      },
      {
        id: 37,
        name: "**Sosiologi**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang masyarakat, interaksi sosial, dan perubahan sosial",
        isRequired: false,
        category: "IPS"
      },
      {
        id: 38,
        name: "**Geografi**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang bumi, fenomena geografis, dan hubungan manusia dengan lingkungan",
        isRequired: false,
        category: "IPS"
      },
      {
        id: 39,
        name: "**Antropologi**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran tentang manusia, kebudayaan, dan keragaman budaya",
        isRequired: false,
        category: "IPS"
      },
      
      // Mata Pelajaran Pilihan Bahasa
      {
        id: 40,
        name: "**Bahasa dan Sastra Indonesia**",
        level: "sma",
        phase: "Fase F",
        description: "Pendalaman kemampuan berbahasa Indonesia dan apresiasi sastra Indonesia tingkat lanjut",
        isRequired: false,
        category: "Bahasa"
      },
      {
        id: 41,
        name: "**Bahasa Mandarin**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran bahasa Mandarin dan pengenalan budaya Tiongkok",
        isRequired: false,
        category: "Bahasa"
      },
      {
        id: 42,
        name: "**Bahasa Jepang**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran bahasa Jepang dan pengenalan budaya Jepang",
        isRequired: false,
        category: "Bahasa"
      },
      {
        id: 43,
        name: "**Bahasa Arab**",
        level: "sma",
        phase: "Fase F",
        description: "Pembelajaran bahasa Arab dan pengenalan budaya Arab",
        isRequired: false,
        category: "Bahasa"
      },
      
      // Mata Pelajaran Pilihan Seni dan Prakarya
      {
        id: 44,
        name: "**Seni Musik**",
        level: "sma",
        phase: "Fase F",
        description: "Pengembangan keterampilan bermusik dan apresiasi musik",
        isRequired: false,
        category: "Seni dan Prakarya"
      },
      {
        id: 45,
        name: "**Seni Rupa**",
        level: "sma",
        phase: "Fase F",
        description: "Pengembangan keterampilan seni visual dan apresiasi karya seni rupa",
        isRequired: false,
        category: "Seni dan Prakarya"
      },
      {
        id: 46,
        name: "**Seni Tari**",
        level: "sma",
        phase: "Fase F",
        description: "Pengembangan keterampilan menari dan apresiasi tari",
        isRequired: false,
        category: "Seni dan Prakarya"
      },
      {
        id: 47,
        name: "**Seni Teater**",
        level: "sma",
        phase: "Fase F",
        description: "Pengembangan keterampilan peran dan apresiasi teater",
        isRequired: false,
        category: "Seni dan Prakarya"
      }
    ];
  }
  
  return [];
};
