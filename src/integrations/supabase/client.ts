
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://kdpdyjmwtgkjhupcowlm.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtkcGR5am13dGdramh1cGNvd2xtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2MjQ0MzgsImV4cCI6MjA1ODIwMDQzOH0.ILabT0YBQmW6yztTNXn9_4Ojm5lkjPWVhgsH9lvjlMg";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true
  }
});

// Helper function to get features for admin/teacher module
export const getAdminFeatures = async () => {
  try {
    // For now, return mock data since the table might not exist yet
    return [
      {
        id: '1',
        title: 'Manajemen Siswa',
        description: 'Kelola data siswa dengan mudah dan efisien',
        icon_name: 'Users',
        display_order: 1
      },
      {
        id: '2',
        title: 'Analisis Prestasi',
        description: 'Dapatkan wawasan tentang kinerja akademik siswa',
        icon_name: 'BarChart4',
        display_order: 2
      },
      {
        id: '3',
        title: 'Jadwal Terpadu',
        description: 'Kelola jadwal kelas dan kegiatan sekolah',
        icon_name: 'Calendar',
        display_order: 3
      },
      {
        id: '4',
        title: 'Laporan Otomatis',
        description: 'Buat laporan akademik dan administrasi secara otomatis',
        icon_name: 'FileText',
        display_order: 4
      }
    ];
  } catch (error) {
    console.error('Error fetching admin features:', error);
    return [];
  }
};

// Helper function to get features for student module
export const getStudentFeatures = async () => {
  try {
    // For now, return mock data since the table might not exist yet
    return [
      {
        id: '1',
        title: 'Tutor AI Personal',
        description: 'Belajar dengan bantuan AI yang menyesuaikan dengan gaya belajar Anda',
        icon_name: 'GraduationCap',
        display_order: 1
      },
      {
        id: '2',
        title: 'Latihan Soal Cerdas',
        description: 'Latihan soal yang menyesuaikan dengan tingkat kemampuan Anda',
        icon_name: 'BrainCircuit',
        display_order: 2
      },
      {
        id: '3',
        title: 'Rangkuman Materi',
        description: 'Rangkuman otomatis dari materi pelajaran yang membantu pemahaman',
        icon_name: 'BookOpenCheck',
        display_order: 3
      },
      {
        id: '4',
        title: 'Konsultasi Virtual',
        description: 'Tanyakan pertanyaan dan dapatkan jawaban secara real-time',
        icon_name: 'MessageSquare',
        display_order: 4
      }
    ];
  } catch (error) {
    console.error('Error fetching student features:', error);
    return [];
  }
};

// Function to check Supabase connection status
export const checkSupabaseConnection = async () => {
  try {
    // Using a more type-safe approach that won't cause TypeScript errors
    const { error } = await supabase.auth.getSession();
    return { connected: !error, error: error ? error.message : null };
  } catch (err) {
    console.error('Supabase connection check failed:', err);
    return { connected: false, error: err instanceof Error ? err.message : 'Unknown error' };
  }
};

// Helper function to get subject features 
export const getSubjectFeatures = async () => {
  try {
    // For now, return mock data since the table might not exist yet
    return [
      {
        id: '1',
        title: 'Matematika',
        description: 'Pelajari **konsep aljabar**, **geometri**, dan **statistik** dengan cara yang interaktif dan menyenangkan',
        icon_name: 'PiMath',
        symbol: '‚àë',
        color: 'purple',
        display_order: 1
      },
      {
        id: '2',
        title: 'Fisika',
        description: '**Eksperimen virtual** dan simulasi untuk memahami **hukum-hukum fisika** dengan lebih baik',
        icon_name: 'Flask',
        symbol: 'œÜ',
        color: 'blue',
        display_order: 2
      },
      {
        id: '3',
        title: 'Kimia',
        description: 'Visualisasi **reaksi kimia** dan **struktur molekul** untuk pemahaman yang lebih mendalam',
        icon_name: 'Vial',
        symbol: '‚öóÔ∏è',
        color: 'green',
        display_order: 3
      },
      {
        id: '4',
        title: 'Biologi',
        description: 'Jelajahi **struktur sel**, **genetika**, dan **ekosistem** dengan model 3D interaktif',
        icon_name: 'Dna',
        symbol: 'üß¨',
        color: 'red',
        display_order: 4
      },
      {
        id: '5',
        title: 'Bahasa Indonesia',
        description: 'Tingkatkan kemampuan **menulis**, **membaca**, dan **menganalisis teks** dengan AI tutor',
        icon_name: 'Languages',
        symbol: 'Aa',
        color: 'orange',
        display_order: 5
      },
      {
        id: '6',
        title: 'Bahasa Inggris',
        description: 'Latih **percakapan**, **tata bahasa**, dan **kosakata** dengan partner AI yang responsif',
        icon_name: 'Globe',
        symbol: 'Bb',
        color: 'cyan',
        display_order: 6
      },
      {
        id: '7',
        title: 'Sejarah',
        description: 'Jelajahi **peristiwa sejarah** dengan rekonstruksi interaktif dan **peta kronologi**',
        icon_name: 'Landmark',
        symbol: 'üèõÔ∏è',
        color: 'amber',
        display_order: 7
      },
      {
        id: '8',
        title: 'Geografi',
        description: 'Pelajari tentang **bentuk bumi**, **iklim**, dan **budaya** dengan peta interaktif',
        icon_name: 'MapPin',
        symbol: 'üåç',
        color: 'teal',
        display_order: 8
      }
    ];
  } catch (error) {
    console.error('Error fetching subject features:', error);
    return [];
  }
};
